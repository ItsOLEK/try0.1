<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¹Ø¯ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† - Ø®Ø·Ø© Ø±Ù…Ø¶Ø§Ù†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f0f4f8;
        }
        .quran-font {
            font-family: 'Amiri', serif;
        }
        .day-card {
            transition: all 0.3s ease;
        }
        .day-card.completed {
            background-color: #d1fae5;
            border-color: #10b981;
        }
        .prayer-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            background-color: #e2e8f0;
            margin-bottom: 4px;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header -->
    <nav class="bg-emerald-800 text-white p-6 shadow-xl sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold quran-font">ğŸŒ™ Ø®ØªÙ…Ø© Ø±Ù…Ø¶Ø§Ù† (604 ØµÙØ­Ø©)</h1>
                <p class="text-emerald-100 text-xs mt-1">Ø®Ø·Ø© Ø§Ù„Ù€ 29 ÙŠÙˆÙ…Ø§Ù‹ Ø§Ù„Ù…Ø®ØµØµØ©</p>
            </div>
            <div id="overall-progress" class="text-right">
                <span class="block text-xs uppercase opacity-75">Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„ÙƒÙ„ÙŠ</span>
                <span id="total-percent" class="text-xl font-bold">0%</span>
            </div>
        </div>
        <div class="w-full bg-emerald-900 h-2 mt-4 rounded-full overflow-hidden">
            <div id="total-progress-bar" class="bg-yellow-400 h-full transition-all duration-700" style="width: 0%"></div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8 max-w-5xl">
        
        <!-- Summary Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="bg-white p-5 rounded-2xl shadow-sm border-b-4 border-blue-500">
                <span class="text-gray-500 text-sm">Ø£ÙŠØ§Ù… Ù…Ù†Ø¬Ø²Ø©</span>
                <div class="text-3xl font-bold text-blue-600"><span id="days-done">0</span> / 29</div>
            </div>
            <div class="bg-white p-5 rounded-2xl shadow-sm border-b-4 border-emerald-500">
                <span class="text-gray-500 text-sm">ØµÙØ­Ø§Øª Ù…Ù‚Ø±ÙˆØ¡Ø©</span>
                <div class="text-3xl font-bold text-emerald-600"><span id="pages-done">0</span> / 604</div>
            </div>
            <div class="bg-white p-5 rounded-2xl shadow-sm border-b-4 border-yellow-500">
                <span class="text-gray-500 text-sm">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø®ØªÙ…</span>
                <div class="text-3xl font-bold text-yellow-600"><span id="pages-left">604</span> ØµÙØ­Ø©</div>
            </div>
        </div>

        <!-- Schedule Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="days-container">
            <!-- Generated by JavaScript -->
        </div>

    </main>

    <footer class="text-center py-10 text-gray-500 text-sm">
        <p class="mb-2">ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ… ØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</p>
        <button onclick="resetProgress()" class="text-red-400 hover:text-red-600 underline">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ØªÙ‚Ø¯Ù…</button>
    </footer>

    <script>
        const daysContainer = document.getElementById('days-container');
        let completedDays = JSON.parse(localStorage.getItem('ramadan_khatma_progress')) || [];
        
        // Ø¨Ù†Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ
        const schedule = [];
        let currentPage = 1;

        for (let day = 1; day <= 29; day++) {
            let dayData = { day: day, prayers: [] };
            
            if (day <= 28) {
                // Ø§Ù„ÙØ¬Ø± 5 ØµØŒ Ø§Ù„Ø¨Ø§Ù‚ÙŠ 4 Øµ (Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ 21 ØµÙØ­Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹)
                dayData.prayers = [
                    { name: 'Ø§Ù„ÙØ¬Ø±', pages: 5 },
                    { name: 'Ø§Ù„Ø¸Ù‡Ø±', pages: 4 },
                    { name: 'Ø§Ù„Ø¹ØµØ±', pages: 4 },
                    { name: 'Ø§Ù„Ù…ØºØ±Ø¨', pages: 4 },
                    { name: 'Ø§Ù„Ø¹Ø´Ø§Ø¡', pages: 4 }
                ];
            } else {
                // Ø§Ù„ÙŠÙˆÙ… 29: Ø§Ù„ÙØ¬Ø± 5ØŒ Ø¸Ù‡Ø± 4ØŒ Ø¹ØµØ± 4ØŒ Ù…ØºØ±Ø¨ 3 (Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ 16 ØµÙØ­Ø©)
                // Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: (28 * 21) + 16 = 588 + 16 = 604 ØµÙØ­Ø© Ø¨Ø§Ù„Ø¶Ø¨Ø·
                dayData.prayers = [
                    { name: 'Ø§Ù„ÙØ¬Ø±', pages: 5 },
                    { name: 'Ø§Ù„Ø¸Ù‡Ø±', pages: 4 },
                    { name: 'Ø§Ù„Ø¹ØµØ±', pages: 4 },
                    { name: 'Ø§Ù„Ù…ØºØ±Ø¨', pages: 3 }
                ];
            }
            
            // ØªØ­Ø¯ÙŠØ¯ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØµÙØ­Ø§Øª Ù„ÙƒÙ„ ØµÙ„Ø§Ø©
            dayData.totalDayPages = 0;
            dayData.details = dayData.prayers.map(p => {
                const start = currentPage;
                const end = currentPage + p.pages - 1;
                currentPage = end + 1;
                dayData.totalDayPages += p.pages;
                return { ...p, range: `${start} - ${end}` };
            });
            
            schedule.push(dayData);
        }

        function render() {
            daysContainer.innerHTML = '';
            let totalPagesRead = 0;

            schedule.forEach(item => {
                const isDone = completedDays.includes(item.day);
                if(isDone) totalPagesRead += item.totalDayPages;

                const card = document.createElement('div');
                card.className = `day-card bg-white rounded-2xl p-5 shadow-sm border-2 transition-all ${isDone ? 'completed' : 'border-transparent'}`;
                
                let prayersHtml = item.details.map(p => `
                    <div class="flex justify-between items-center mb-2 text-sm border-b border-gray-50 pb-1">
                        <span class="font-bold text-gray-600">${p.name}</span>
                        <span class="bg-gray-100 px-2 py-0.5 rounded text-xs text-emerald-800 font-mono">Øµ ${p.range}</span>
                    </div>
                `).join('');

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="text-xs text-emerald-600 font-bold">Ø§Ù„ÙŠÙˆÙ…</span>
                            <h3 class="text-2xl font-black">${item.day}</h3>
                        </div>
                        <input type="checkbox" ${isDone ? 'checked' : ''} 
                               onchange="toggleDay(${item.day})"
                               class="w-6 h-6 accent-emerald-600 cursor-pointer">
                    </div>
                    <div class="space-y-1">
                        ${prayersHtml}
                    </div>
                    <div class="mt-4 pt-3 border-t border-dashed text-center text-xs text-gray-400">
                        Ù…Ø¬Ù…ÙˆØ¹ ØµÙØ­Ø§Øª Ø§Ù„ÙŠÙˆÙ…: ${item.totalDayPages}
                    </div>
                `;
                daysContainer.appendChild(card);
            });

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            document.getElementById('days-done').innerText = completedDays.length;
            document.getElementById('pages-done').innerText = totalPagesRead;
            document.getElementById('pages-left').innerText = 604 - totalPagesRead;
            const totalPercent = Math.round((totalPagesRead / 604) * 100);
            document.getElementById('total-percent').innerText = totalPercent + '%';
            document.getElementById('total-progress-bar').style.width = totalPercent + '%';
        }

        function toggleDay(day) {
            if (completedDays.includes(day)) {
                completedDays = completedDays.filter(d => d !== day);
            } else {
                completedDays.push(day);
            }
            localStorage.setItem('ramadan_khatma_progress', JSON.stringify(completedDays));
            render();
        }

        function resetProgress() {
            if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©ØŸ')) {
                completedDays = [];
                localStorage.removeItem('ramadan_khatma_progress');
                render();
            }
        }

        window.onload = render;
    </script>
</body>
</html>
